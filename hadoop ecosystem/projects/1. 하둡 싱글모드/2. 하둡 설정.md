---
style: |
  img {
    display: block;
    float: none;
    margin-left: auto;
    margin-right: auto;
  }
marp: true
paginate: true
---
### 단계1: hadoop 설정 디렉토리로 이동
```shell
cd $HADOOP_HOME/etc/hadoop
```
### 단계2: core-site.xml
- HDFS 와 맵리듀스에서 공통적으로 사용할 환경정보를 입력 
- `fs.defaultFS` : HDFS 기본 파일시스템 디렉토리를 지정한다.

```shell
sudo vim core-site.xml
# 아래 작성한 xml 내용을 추가함
<configuration>
        <property>
                <name>fs.defaultFS</name>
                <value>hdfs://master:9000</value>
        </property>
</configuration>
```
---
### 단계3: hdfs-site.xml
- HDFS에서 사용할 환경 정보를 설정하는 파일이다.
- `dfs.replication` : HDFS 파일 블록 복제 개수 지정한다.
- `dfs.namenode.name.dir` : NameNode에서 관리할 데이터 디렉토리 경로 지정한다.
- `dfs.datanode.data.dir` : DataNode에서 관리할 데이터 디렉토리 경로 지정한다.
---
```shell
sudo vim hdfs-site.xml
# 아래 작성한 xml 내용을 추가함
<configuration>
        <property>
                <name>dfs.replication</name>
                <value>1</value>
        </property>
        <property>
                <name>dfs.namenode.name.dir</name>
                <value>file:///hdfs_dir/namenode</value>
        </property>
        <property>
                <name>dfs.datanode.data.dir</name>
                <value>file:///hdfs_dir/datanode</value>
        </property>
</configuration>
```
---
### 단계4: yarn-site.xml
- Resource Manager 및 Node Manager에 대한 구성을 정의한다.
```shell
sudo vim yarn-site.xml
# 아래 작성한 xml 내용을 추가함
<configuration>
        <property>
                <name>yarn.nodemanager.aux-services</name>
                <value>mapreduce_shuffle</value>
        </property>
        <property>
                <name>yarn.nodemanager.aux-services.mapreduce_shuffle.class</name>
                <value>org.apache.hadoop.mapred.ShuffleHandler</value>
        </property>
        <property>
                <name>yarn.resourcemanager.hostname</name>
                <value>master</value>
        </property>
        <property>
                <name>yarn.nodemanager.vmem-check-enabled</name>
                <value>false</value>
        </property>
</configuration>
```
---
### 단계5: mapred-site.xml
- MapReduce 어플리케이션 설정 파일을 편집한다.
```shell
sudo vim mapred-site.xml
# 아래 작성한 xml 내용을 추가함
<configuration>
        <property>
                <name>mapreduce.framework.name</name>
                <value>yarn</value>
        </property>
        <property>
                <name>yarn.app.mapreduce.am.env</name>
                <value>HADOOP_MAPRED_HOME=${HADOOP_HOME}</value>
        </property>
        <property>
                <name>mapreduce.map.env</name>
                <value>HADOOP_MAPRED_HOME=${HADOOP_HOME}</value>
        </property>
        <property>
                <name>mapreduce.reduce.env</name>
                <value>HADOOP_MAPRED_HOME=${HADOOP_HOME}</value>
        </property>
</configuration>
```
---
### 단계6: hadoop 환경변수
```shell
sudo vim hadoop-env.sh

# 아래 내용 추가 
export JAVA_HOME=/usr/lib/jvm/java-8-openjdk-amd64
export HDFS_NAMENODE_USER="root"
export HDFS_DATANODE_USER="root"
export HDFS_SECONDARYNAMENODE_USER="root"
export YARN_RESOURCEMANAGER_USER="root"
export YARN_NODEMANAGER_USER="root"
```
---
### 단계7: file system namenode format 진행
```shell
/usr/local/hadoop-3.2.3/bin/hdfs namenode -format /hdfs_dir
```
![Alt text](./img/image-3.png)



















